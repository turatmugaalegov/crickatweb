{"ast":null,"code":"import { HttpHeaders } from \"@angular/common/http\";\nimport { map } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class EventService {\n  constructor(http) {\n    this.http = http;\n    this.apiUrl = 'https://dry-caverns-85169-185a985df7fb.herokuapp.com/api/v1.0';\n  }\n  createEvent(name, date, type, ageRating, ticketPrice, location) {\n    const token = localStorage.getItem('token'); // Retrieve the stored token\n    const headers = new HttpHeaders({\n      'Content-Type': 'application/json',\n      'Authorization': 'Bearer ' + token // Include the token in the Authorization header\n    });\n\n    return this.http.post(`${this.apiUrl}/create-event`, {\n      name,\n      date,\n      type,\n      ageRating,\n      ticketPrice,\n      location\n    }, {\n      headers: headers,\n      withCredentials: true\n    });\n  }\n  getEvents() {\n    const headers = new HttpHeaders({\n      'Content-Type': 'application/json'\n    });\n    const query = {\n      query: `\n        query {\n        allEvents {\n        events {\n        name\n        date\n        location\n    }\n  }\n}\n      `\n    };\n    return this.http.post(this.apiUrl + '/graphql', query, {\n      headers\n    }).pipe(map(response => response.data.allEvents));\n  }\n  getEventsForUser() {\n    const token = localStorage.getItem('token');\n    const headers = new HttpHeaders({\n      'Content-Type': 'application/json',\n      'Authorization': 'Bearer ' + token // Include the token in the Authorization header\n    });\n\n    return this.http.get(`${this.apiUrl}/events/myevents}`, {\n      headers: headers\n    });\n  }\n  static #_ = this.ɵfac = function EventService_Factory(t) {\n    return new (t || EventService)(i0.ɵɵinject(i1.HttpClient));\n  };\n  static #_2 = this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: EventService,\n    factory: EventService.ɵfac\n  });\n}","map":{"version":3,"names":["HttpHeaders","map","EventService","constructor","http","apiUrl","createEvent","name","date","type","ageRating","ticketPrice","location","token","localStorage","getItem","headers","post","withCredentials","getEvents","query","pipe","response","data","allEvents","getEventsForUser","get","_","i0","ɵɵinject","i1","HttpClient","_2","factory","ɵfac"],"sources":["/Users/timn/Documents/Studium/Semester 3/Crickat Github/crickatweb/src/app/data/event-service.ts"],"sourcesContent":["import { HttpClient, HttpHeaders } from \"@angular/common/http\";\nimport { Injectable } from \"@angular/core\";\nimport { map } from 'rxjs/operators';\nimport { EventResponse } from \"../graphql/eventresponse\";\nimport { Observable } from \"rxjs\";\n\n\n@Injectable()\nexport class EventService {\n  private apiUrl = 'https://dry-caverns-85169-185a985df7fb.herokuapp.com/api/v1.0'; \n\n  constructor(private http: HttpClient) { }\n\n  createEvent(name: string, date: string, type: string, ageRating: String, ticketPrice: number, location: string) {\n    const token = localStorage.getItem('token'); // Retrieve the stored token\n    const headers = new HttpHeaders({\n      'Content-Type': 'application/json',\n      'Authorization': 'Bearer ' + token // Include the token in the Authorization header\n    });\n    return this.http.post<any>(`${this.apiUrl}/create-event`, { name, date, type, ageRating, ticketPrice, location}, { headers: headers, withCredentials: true });\n  }\n\n  getEvents() {\n    const headers = new HttpHeaders({\n      'Content-Type': 'application/json',\n    });\n\n    const query = {\n      query: `\n        query {\n        allEvents {\n        events {\n        name\n        date\n        location\n    }\n  }\n}\n      `\n    };\n\n    return this.http.post<EventResponse>(this.apiUrl + '/graphql', query, { headers })\n      .pipe(\n        map(response => response.data.allEvents)\n      );\n  }\n\n  getEventsForUser(): Observable<any> {\n    const token = localStorage.getItem('token');\n    const headers = new HttpHeaders({\n      'Content-Type': 'application/json',\n      'Authorization': 'Bearer ' + token // Include the token in the Authorization header\n    });\n    return this.http.get(`${this.apiUrl}/events/myevents}`, { headers: headers });\n  }\n}"],"mappings":"AAAA,SAAqBA,WAAW,QAAQ,sBAAsB;AAE9D,SAASC,GAAG,QAAQ,gBAAgB;;;AAMpC,OAAM,MAAOC,YAAY;EAGvBC,YAAoBC,IAAgB;IAAhB,KAAAA,IAAI,GAAJA,IAAI;IAFhB,KAAAC,MAAM,GAAG,+DAA+D;EAExC;EAExCC,WAAWA,CAACC,IAAY,EAAEC,IAAY,EAAEC,IAAY,EAAEC,SAAiB,EAAEC,WAAmB,EAAEC,QAAgB;IAC5G,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;IAC7C,MAAMC,OAAO,GAAG,IAAIhB,WAAW,CAAC;MAC9B,cAAc,EAAE,kBAAkB;MAClC,eAAe,EAAE,SAAS,GAAGa,KAAK,CAAC;KACpC,CAAC;;IACF,OAAO,IAAI,CAACT,IAAI,CAACa,IAAI,CAAM,GAAG,IAAI,CAACZ,MAAM,eAAe,EAAE;MAAEE,IAAI;MAAEC,IAAI;MAAEC,IAAI;MAAEC,SAAS;MAAEC,WAAW;MAAEC;IAAQ,CAAC,EAAE;MAAEI,OAAO,EAAEA,OAAO;MAAEE,eAAe,EAAE;IAAI,CAAE,CAAC;EAC/J;EAEAC,SAASA,CAAA;IACP,MAAMH,OAAO,GAAG,IAAIhB,WAAW,CAAC;MAC9B,cAAc,EAAE;KACjB,CAAC;IAEF,MAAMoB,KAAK,GAAG;MACZA,KAAK,EAAE;;;;;;;;;;;KAWR;IAED,OAAO,IAAI,CAAChB,IAAI,CAACa,IAAI,CAAgB,IAAI,CAACZ,MAAM,GAAG,UAAU,EAAEe,KAAK,EAAE;MAAEJ;IAAO,CAAE,CAAC,CAC/EK,IAAI,CACHpB,GAAG,CAACqB,QAAQ,IAAIA,QAAQ,CAACC,IAAI,CAACC,SAAS,CAAC,CACzC;EACL;EAEAC,gBAAgBA,CAAA;IACd,MAAMZ,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,MAAMC,OAAO,GAAG,IAAIhB,WAAW,CAAC;MAC9B,cAAc,EAAE,kBAAkB;MAClC,eAAe,EAAE,SAAS,GAAGa,KAAK,CAAC;KACpC,CAAC;;IACF,OAAO,IAAI,CAACT,IAAI,CAACsB,GAAG,CAAC,GAAG,IAAI,CAACrB,MAAM,mBAAmB,EAAE;MAAEW,OAAO,EAAEA;IAAO,CAAE,CAAC;EAC/E;EAAC,QAAAW,CAAA,G;qBA9CUzB,YAAY,EAAA0B,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,UAAA;EAAA;EAAA,QAAAC,EAAA,G;WAAZ9B,YAAY;IAAA+B,OAAA,EAAZ/B,YAAY,CAAAgC;EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}